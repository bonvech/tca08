Углеродсодержащие аэрозоли чрезвычайно разнообразны и часто составляют наибольшую и наиболее важную массовую фракцию мелких частиц   (PM2.5). Они влияют на качество воздуха, видимость, образование облаков, влияющее на климат, планетарный радиационный баланс и здоровье людей. Фракции углеродистых аэрозолей часто подразделяют на органический углерода (ОС) и элементарный углерода (ЕС) на основе их изменчивости при использовании термо-оптических методов.  

Недавно разработанный онлайн метод измерения общего – черного углерода сочетает оптический метод контроля черного углерода (BC) анализаторомаэталометром модели АЕ33 и термический метод измерения общего углерода (ТС) анализатором общего углерода TCA08.  Этот “TC-BC” метод определяет фракцию органического углерода (OC) по формуле OC = TC - b·BC, где параметр b отражает отношение оптически измеренного черного углерода ВС к термически измеренному элементарному углероду (EC). Так как термическое разделение элементарного углерода ЕС от органического углерода ОС различается в зависимости регионов, мест расположения, времен года и в особенности от термических протоколов, использованных для анализа, то фактор b может быть различным. Значение b по умолчанию составляет 1. Однако, анализ общего углерода избегает этой неопределенности и позволяет получить надежный с научной точки зрения результат.   

ЗАДАНИЯ:

1)  Получить данные по TC (общий углерод), BC (черный углерод), EC (элементарный углерод) и OC (органический углерод)

    EC = b*BC  b=1
    OC = TC - b*BC

Нарисовать:  OC, EC, TC и пропорции OC/EC за последние 24 часа или последние 14 дней.

Послать сообщения в случае не получения данных. Написать об этом в собственный лог-файл.

2) Получить из данных информацию о работе прибора:

G0_Status,G1_Status,G2_Status,G3_Status,G4_Status ,G5_Status,G6_Status  - статусы работы прибора:
    
    G0: работа TCA  (G0=0, standby) 
    G1: Камера 1 рабочий статус (G1=0, Ch1 = idle) 
    G2: Камера 2 рабочий статус (G2=0, Ch2 = idle) 
    G3: Статусное предупреждение по камере 1 и ошибки ее состояния 
    G4: Статусное предупреждение по камере 2 и ошибки ее состояния 
    G5: общие предупреждения, ошибки и информация 
    G6: Статус сети и внешнего устройства. 

Проанализировать статусы, послать сообщения о неисправностях, если необходимо.

Записать сообщения в собственный лог-файл

Описания статусов и файлов данных:

Статусы:
 
    bit 0 	G0 			G1 		G2 
    0   1 Онлайн измерения 		Проба  		Проба 
    1   2 Офлайн измерения 		Анализ 		Анализ 
    2   4 Калибровка 		Чистка 		Чистка 
    3   8 Верификация 		Утечка 		Утечка 
    4  16 Сменить кварц 		Денудер 	Денудер 
    5  32 Инициализация дежурного режима Нуль 	Нуль 
    6  64 Безопасная остановка 	Температура 	Температура 
    7 128 Критическая остановка 
    
    bit 0 			G3 			G4 
    0   1 Прерывание напряжения e 		Прерывание напряжения e 
    1   2 Утечка w 				Утечка w 
    2   4 Сбой целостности фильтра w 	Сбой целостности фильтра w 
    3   8 Ошибка подогревателя e 		Ошибка подогревателя e 
    4  16 Превышение по току e 		Превышение по току e 
    5  32 Ошибка установки напряжения e 	Ошибка установки напряжения e 
    6  64 Не подключен датчик температуры e Не подключен датчик температуры e 
    7 128 Ошибка шарового клапана  e 	Ошибка шарового клапана e 

    bit 0 			G5 			G6 
    0   1 Открытие двери w 			Сеть обнаружена 
    1   2 Поток для анализа w 		База данных e 
    2   4 Поток пробы w 			Установка e 
    3   8 Вентилятор охлаждения w 		Внешнее устройство w 
    4  16 Ошибка CO2 e 			Память w 
    5  32 Внутренняя коммуникация e 
    6  64   
    7 128 

Когда флаг состояния имеет тип  e (ошибка), анализатор останавливается. Когда флаг состояния имеет тип w (внимание), анализатор продолжает работать, но нуждается во внимании персонала. Общий статус каждой группы  G0 - G6 может быть комбинацией (суммой) статусов. 


Описание различных типов данных:

Имя экспортированного файла конструируется следующим образом: «Имя таблицы_дата_время.csv (“TableName_Date_Time.csv”) (ex. Data_23-10- 2018_15-53.csv). Примеры экспортированных файлов:  

1)  Данные:

    ID,TimeStamp,SetupID,Timebase,G0_Status,G1_Status,G2_Status,G3_Status,G4_Status,    G5_Status,G6_Status,Ch1_Status,Ch1_SampleID,Ch2_Status,Ch2_SampleID,MainBoar dStatus,Ch1BoardStatus,Ch2BoardStatus,SensorBoardStatus,FlowS,setFlowS,FlowS_ RAW,SamplePumpSpeed,FlowA,setFlowA,FlowA_RAW,AnalyticPumpSpeed,Solenoid 1,Solenoid2,Solenoid5,BallValve1,BallValve2,BallValve3,BallValve4,Ch1_Temp,Ch2_ Temp,Ch1_Voltage1,setCh1Voltage1,Ch1_Current1,Ch1_Voltage2,setCh1Voltage2,Ch 1_Current2,Ch2_Voltage1,setCh2Voltage1,Ch2_Current1,Ch2_Voltage2,setCh2Voltag e2,Ch2_Current2,Ch1_SafetyTemp,Ch2_SafetyTemp,SafetyTempInt,Fan1,Fan2,Fan3, Fan4,LicorTemp,LicorPressure,LicorCO2,LicorCO2abs,LicorH2O,LicorH2Oabs,Licor H2Odewpoint,LicorVoltage 

    1602383,2018-11-16 23:59:59.073,11,20,1,2,1,4,0,0,1,Standby,866,Standby,867,N,n,n,n,16.6347,0,635,25 5,0,0,203,0,0,0,0,C,C,O,O,100,31,0,0,0,0,0,0,0,0,0,0,0,0,34,33,34,60,0,40,40,51.4907,9 9.3099,842.182,0.1488839,11.8919,0.07915366,9.36399,11.90369

2)  Результат онлайн: 

    ID,SampleID,StartTimeUTC,EndTimeUTC,StartTimeLocal,EndTimeLocal,TCcounts,
    TCmass,TCconc,AE33_BC6,AE33_ValidData,AE33_b,OC,EC, CO2,Volume,Chamber,SetupID, a1,b1,c1,d1,e1,f1,a2,b2,c2,d2,e2,f2 

    1,3,2018-09-05 09:20:00,2018-09-05 09:40:00,2018-09-05 11:20:00,2018-09-05 11:40:00,1618.25,18529.02,58708,0,0,1,0,0,678.83,315.61,1,4,734.11151923016,0. 007605128934671236,-0.0008426029126914941,1.2467680585602101e-5,- 5.7904734574089255e-8,8.278151418589865e- 11,721.7721108681338,0.07058174812424729,- 0.0033522482678232687,4.1361800378848836e-5,-1.7473727839550791e- 7,2.3652177675724055e-10

3)  Результат офлайн: 

    ID,SampleID,SampleName,StartTimeUTC,StartTimeLocal,TCcounts,TCmass,TCconc, PunchArea,DryingTime,Chamber,SetupID,a1,b1,c1,d1,e1,f1,a2,b2,c2,d2,e2,f2

    39,695,5_arso_20170215mm,2018-01-12 12:36:19,2018-01-12 13:36:19,17520.1621,214100,189335,1.1308,0,1,25,653.0881745453704,2.070347 518278751,-0.015783676941518294,5.743388472621944e-5,- 9.85991925184398e-8,6.435298788574163e-11,- 1921.268617466437,20.638064759183404,-

4) Установки: 

    ID,TimeStamp,SerialNumber,SetFlowS,SetFlowA,Area,FlowFormulaA,FlowFormulaB,
    FlowFormulaC,FlowFormulaD,FlowFormulaE,FlowFormulaF,CCch1,CCch2,SlopeTe mpCh1,InterceptTempCh1,SlopeTempCh2,InterceptTempCh2,SampleTime,C0,C1,C2,
    C3,C4,C5,C6,C7,C8,C9,C10,P11,P12,P13,P21,P22,P23,A0,A2,A3,FlowRepStd,Temp,Pr essure,SoftwareVersion,FirmwareVersion,AE33_b,TimeZone,DST,TimeProtocol,BHp aramID,FilterIntegrity_threshold 

    1,2017-09-26 14:19:05,TCA-08-S00-00000,16.7,0.5,4.91,7.31204978640517e-5,- 0.0357400687309517,10.0655216405797,9.76321196119687e-7,- 4.46034050051914e- 6,0.0185413211101763,11.45,11.45,1,0,1,0,60,300,3,12,57,3,495,3,12,57,3,180,265, 265,220,265,265,220,100,50,100,1,25,101.325,0.1.0.0,301,1,UTC,1,0,0,0.45 


Описание файла данных онлайн: 

    ID, уникальный идентификатор базы данных 
    SampleID, Номер, представляющий пробу и ее аналитические данные  
    StartTimeUTC, Стартовое время пробоотбора для измерения концентрации общего углерода (UTC) 
    EndTimeUTC, Время окончания пробоотбора для измерения концентрации общего углерода (UTC) 
    StartTimeLocal, Стартовое время пробоотбора для измерения концентрации общего углерода (местное время) 
    EndTimeLocal, Время окончания пробоотбора для измерения концентрации общего углерода (местное время) 
    TCcounts, Интеграл сигнала CO2 (ppm) 
    TCmass, TC counts, умноженный на постоянную углерода CCCh1 или CCCh2 (нг) 
    TCconc, Масса общего углеродаTC , разделенная на объем отобранного воздуха 
    BC6_AE33, Усредненное значение черного углерода (измеренное при 880 нм с подключенным АЕ33) – та же база данных по времени, что и для TCA08 AE33_ValidData Фракция данных AE33 (в %), которые действительны в пределах базы данных по времени ТСА08. Смотрите руководство по эксплуатации на AE33 для определения статуса значений, представляющих действительные данные. 
    AE33_b Параметр b: EC = bBC 
    OC OC = TC-bBC
    EC EC = bBC 
    CO2 Среднее значение СО2 в окружающем воздухе (ppm) 
    Volume, Объем отобранного воздуха пробы 
    Chamber, Ячейка, в которой проводились измерения 
    SetupID, Конфигурация анализатора для этого измерения a1,b1,c1,d1,e1,f1,a2,b2,c2,d2,e2,f2 Полиномиальные константы, описывающие фон                   СО2 в течение первого и второго времени нагрева 

 
OFFLINE TABLE description 

    ID, Уникальный идентификатор базы данных   
    SampleID, Число, представляющее пробу и ее аналитические данные  
    SampleName, Имя пробы (устанавливается пользователем) 
    StartTimeUTC, Время старта анализа офлайн (UTC) 
    StartTimeLocal, Время старта анализа офлайн (местное) 
    TCcounts, Интеграл сигала CO2 (ppm) 
    TCmass, TC counts, умноженное на постоянную углерода  CCCh1 или CCCh2 (нг) 
    TCconc, Масса общего углерода, разделенная на площадьэкспозиции  фильтра (нг/см2) PunchArea, Площадь экспозиции фильтра (устанавливается пользователем, см2) DryingTime, Время сушки перед офлайн анализом (сек). Работает насос аналитического воздуха, подогреватели выключены.  
    Chamber, Ячейка, в которой проводились измерения 
    SetupID, Конфигурация анализатора для этого измерения a1,b1,c1,d1,e1,f1,a2,b2,c2,d2,e2,f2 Полиномиальные константы, описывающие фон                      СО2 в течение первого и второго времени нагрева 
